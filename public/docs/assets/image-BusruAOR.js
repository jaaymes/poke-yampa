import{j as s}from"./jsx-runtime-D_zvdyIk.js";import{u as P}from"./use-language-CQOlZJfg.js";import{r as a}from"./iframe-CRWpp2I1.js";import{S as B}from"./skeleton-CNQqPhWa.js";const T="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9InNoaW1tZXIiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjAlIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZjhmOGY4IiBzdG9wLW9wYWNpdHk9IjAuMiIvPjxzdG9wIG9mZnNldD0iMjUlIiBzdG9wLWNvbG9yPSIjZjFmMWYxIiBzdG9wLW9wYWNpdHk9IjAuNCIvPjxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjZWFlYWVhIiBzdG9wLW9wYWNpdHk9IjAuNSIvPjxzdG9wIG9mZnNldD0iNzUlIiBzdG9wLWNvbG9yPSIjZjFmMWYxIiBzdG9wLW9wYWNpdHk9IjAuNCIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2Y4ZjhmOCIgc3RvcC1vcGFjaXR5PSIwLjIiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI3NoaW1tZXIpIi8+PC9zdmc+",l=new Set;let c=null;const u=new Map,R=()=>(c||(c=new IntersectionObserver(e=>{e.forEach(r=>{if(r.isIntersecting){const i=u.get(r.target);i&&(i(),u.delete(r.target),c?.unobserve(r.target))}})},{rootMargin:"100px",threshold:.1})),c);function D({src:e,alt:r,className:i="",priority:m=!1,width:j,height:p,blurDataURL:w=T,onLoad:S,onError:h,style:y,showLoadingIndicator:L=!0,"data-testid":A}){const[n,o]=a.useState(()=>l.has(e)),[f,d]=a.useState(!1),[g,v]=a.useState(!1),[G,W]=a.useState(n?e:w),x=a.useRef(null),M=a.useRef(null),{t:z}=P(),C=a.useMemo(()=>{const t=`${i} transition-all duration-500 ease-out`;return n?`${t} opacity-100 scale-100`:f?`${t} opacity-75 scale-95`:`${t} opacity-50 scale-95`},[i,n,f]),N=a.useCallback(()=>{o(!0),d(!1),v(!1),l.add(e),S?.()},[e,S]),Z=a.useCallback(()=>{v(!0),o(!1),d(!1),h?.()},[h]),b=a.useCallback(()=>{if(l.has(e)){W(e),o(!0),d(!1);return}d(!0);const t=new window.Image;t.src=e,t.onload=()=>{W(e),N()},t.onerror=()=>Z()},[e,N,Z]);return a.useEffect(()=>{if(m||l.has(e)){b();return}if(!x.current)return;const t=R(),I=x.current;return u.set(I,b),t.observe(I),()=>{u.delete(I),t.unobserve(I)}},[e,m,b]),a.useEffect(()=>{l.has(e)||(o(!1),d(!1),v(!1),W(w))},[e,w]),g?s.jsx("div",{className:`${i} bg-muted/30 flex items-center justify-center text-muted-foreground border border-dashed border-muted-foreground/20 rounded-md`,style:{width:j,height:p,...y},"aria-label":z("imageLoadError"),children:s.jsxs("div",{className:"flex flex-col items-center gap-2 p-2",children:[s.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:"opacity-60",children:[s.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),s.jsx("circle",{cx:"9",cy:"9",r:"2"}),s.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),s.jsx("span",{className:"text-xs opacity-60",children:z("error")})]})}):s.jsxs("div",{ref:M,className:"relative overflow-hidden",style:{width:j,height:p},children:[L&&(f||!n&&!g)&&s.jsx(B,{"data-testid":"skeleton-image",className:"absolute inset-0"}),s.jsx("img",{ref:x,src:G,alt:r,className:C,width:j,height:p,style:{...y,filter:!n&&!g?"blur(10px)":"none"},loading:m?"eager":"lazy",decoding:"async",onLoad:G===e?N:void 0,onError:G===e?Z:void 0,"data-testid":A})]})}D.__docgenInfo={description:"",methods:[],displayName:"Image",props:{src:{required:!0,tsType:{name:"string"},description:""},alt:{required:!0,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},priority:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},width:{required:!1,tsType:{name:"number"},description:""},height:{required:!1,tsType:{name:"number"},description:""},blurDataURL:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9InNoaW1tZXIiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjAlIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZjhmOGY4IiBzdG9wLW9wYWNpdHk9IjAuMiIvPjxzdG9wIG9mZnNldD0iMjUlIiBzdG9wLWNvbG9yPSIjZjFmMWYxIiBzdG9wLW9wYWNpdHk9IjAuNCIvPjxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjZWFlYWVhIiBzdG9wLW9wYWNpdHk9IjAuNSIvPjxzdG9wIG9mZnNldD0iNzUlIiBzdG9wLWNvbG9yPSIjZjFmMWYxIiBzdG9wLW9wYWNpdHk9IjAuNCIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2Y4ZjhmOCIgc3RvcC1vcGFjaXR5PSIwLjIiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI3NoaW1tZXIpIi8+PC9zdmc+"',computed:!1}},onLoad:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onError:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},style:{required:!1,tsType:{name:"ReactCSSProperties",raw:"React.CSSProperties"},description:""},showLoadingIndicator:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},"data-testid":{required:!1,tsType:{name:"string"},description:""}}};export{D as I};

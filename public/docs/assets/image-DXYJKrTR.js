import{j as a}from"./jsx-runtime-D_zvdyIk.js";import{u as z}from"./use-language-BtfUIIQG.js";import{r as s}from"./iframe-B-aTycOV.js";const C="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9InNoaW1tZXIiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjAlIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZjFmMWYxIiBzdG9wLW9wYWNpdHk9IjAuMyIvPjxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjZTVlNWU1IiBzdG9wLW9wYWNpdHk9IjAuNiIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2YxZjFmMSIgc3RvcC1vcGFjaXR5PSIwLjMiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI3NoaW1tZXIpIi8+PC9zdmc+",l=new Set;let c=null;const m=new Map,P=()=>(c||(c=new IntersectionObserver(e=>{e.forEach(t=>{if(t.isIntersecting){const n=m.get(t.target);n&&(n(),m.delete(t.target),c?.unobserve(t.target))}})},{rootMargin:"100px",threshold:.1})),c);function R({src:e,alt:t,className:n="",priority:I=!1,width:f,height:p,blurDataURL:g=C,onLoad:M,onError:W,style:S,showLoadingIndicator:G=!0}){const[i,o]=s.useState(()=>l.has(e)),[j,d]=s.useState(!1),[v,x]=s.useState(!1),[w,b]=s.useState(i?e:g),y=s.useRef(null),L=s.useRef(null),{t:A}=z(),T=s.useMemo(()=>{const r=`${n} transition-all duration-500 ease-out`;return i?`${r} opacity-100 scale-100`:j?`${r} opacity-75 scale-95`:`${r} opacity-50 scale-95`},[n,i,j]),h=s.useCallback(()=>{o(!0),d(!1),x(!1),l.add(e),M?.()},[e,M]),N=s.useCallback(()=>{x(!0),o(!1),d(!1),W?.()},[W]),Z=s.useCallback(()=>{if(l.has(e)){b(e),o(!0),d(!1);return}d(!0);const r=new window.Image;r.src=e,r.onload=()=>{b(e),h()},r.onerror=()=>N()},[e,h,N]);return s.useEffect(()=>{if(I||l.has(e)){Z();return}if(!y.current)return;const r=P(),u=y.current;return m.set(u,Z),r.observe(u),()=>{m.delete(u),r.unobserve(u)}},[e,I,Z]),s.useEffect(()=>{l.has(e)||(o(!1),d(!1),x(!1),b(g))},[e,g]),v?a.jsx("div",{className:`${n} bg-muted/30 flex items-center justify-center text-muted-foreground border border-dashed border-muted-foreground/20 rounded-md`,style:{width:f,height:p,...S},"aria-label":A("imageLoadError"),children:a.jsxs("div",{className:"flex flex-col items-center gap-2 p-2",children:[a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:"opacity-60",children:[a.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),a.jsx("circle",{cx:"9",cy:"9",r:"2"}),a.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),a.jsx("span",{className:"text-xs opacity-60",children:A("error")})]})}):a.jsxs("div",{ref:L,className:"relative overflow-hidden",style:{width:f,height:p},children:[G&&(j||!i&&!v)&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-muted/10 backdrop-blur-[1px] z-10",children:a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx("div",{className:"w-5 h-5 border-2 border-muted-foreground/20 border-t-muted-foreground/60 rounded-full animate-spin"}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-1 h-1 bg-muted-foreground/40 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),a.jsx("div",{className:"w-1 h-1 bg-muted-foreground/40 rounded-full animate-pulse",style:{animationDelay:"200ms"}}),a.jsx("div",{className:"w-1 h-1 bg-muted-foreground/40 rounded-full animate-pulse",style:{animationDelay:"400ms"}})]})]})}),a.jsx("img",{ref:y,src:w,alt:t,className:T,width:f,height:p,style:{...S,filter:!i&&!v?"blur(10px)":"none"},loading:I?"eager":"lazy",decoding:"async",onLoad:w===e?h:void 0,onError:w===e?N:void 0})]})}R.__docgenInfo={description:"",methods:[],displayName:"Image",props:{src:{required:!0,tsType:{name:"string"},description:""},alt:{required:!0,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},priority:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},width:{required:!1,tsType:{name:"number"},description:""},height:{required:!1,tsType:{name:"number"},description:""},blurDataURL:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9InNoaW1tZXIiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjAlIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZjFmMWYxIiBzdG9wLW9wYWNpdHk9IjAuMyIvPjxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjZTVlNWU1IiBzdG9wLW9wYWNpdHk9IjAuNiIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2YxZjFmMSIgc3RvcC1vcGFjaXR5PSIwLjMiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI3NoaW1tZXIpIi8+PC9zdmc+"',computed:!1}},onLoad:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onError:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},style:{required:!1,tsType:{name:"ReactCSSProperties",raw:"React.CSSProperties"},description:""},showLoadingIndicator:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}}}};export{R as I};
